var S=Object.defineProperty;var V=(i,t,e)=>t in i?S(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var c=(i,t,e)=>V(i,typeof t!="symbol"?t+"":t,e);const O="1.0.0",j="",I=[{kind:"javascript-module",path:"src/index.ts",declarations:[],exports:[{kind:"custom-element-definition",name:"drive-picker",declaration:{name:"DrivePickerElement",module:"/src/drive-picker"}},{kind:"custom-element-definition",name:"drive-picker-docs-view",declaration:{name:"DrivePickerDocsViewElement",module:"/src/drive-picker"}},{kind:"js",name:"DrivePickerElement",declaration:{name:"DrivePickerElement",module:"src/index.ts"}},{kind:"js",name:"DrivePickerDocsViewElement",declaration:{name:"DrivePickerDocsViewElement",module:"src/index.ts"}}]},{kind:"javascript-module",path:"src/drive-picker/drive-picker-docs-view-element.ts",declarations:[{kind:"class",description:"The `drive-picker-docs-view` element is used to define a [`google.picker.DocsView`](https://developers.google.com/drive/picker/reference/picker.docsview).",name:"DrivePickerDocsViewElement",members:[{kind:"field",name:"view",type:{text:"google.picker.DocsView"},privacy:"public",description:"Gets the Google Drive Picker view based on the current attribute values.",return:{type:{text:"google.picker.DocsView"}},readonly:!0},{kind:"field",name:"viewId",type:{text:"google.picker.ViewId | undefined"},privacy:"private",readonly:!0}],attributes:[{name:"enable-drives",type:{text:'"default"|"true"|"false"'},description:"Whether to allow the user to select files from shared drives. See [`DocsView.enableDrives`](https://developers.google.com/drive/picker/reference/picker.docsview.setenabledrives)."},{name:"include-folders",type:{text:'"default"|"true"|"false"'},description:"Whether to include folders in the view. See [`DocsView.includeFolders`](https://developers.google.com/drive/picker/reference/picker.docsview.setincludefolders)."},{name:"mime-types",type:{text:"string"},description:"A comma-separated list of MIME types to filter the view. See [`View.setMimeTypes`](https://developers.google.com/drive/picker/reference/picker.view.setmimetypes)."},{name:"mode",type:{text:"string"},description:"The mode of the view. See [`DocsViewMode`](https://developers.google.com/drive/picker/reference/picker.docsviewmode)."},{name:"owned-by-me",type:{text:'"default"|"true"|"false"'},description:"Whether to show files owned by the user. See [`DocsView.ownedByMe`](https://developers.google.com/drive/picker/reference/picker.docsview.setownedbyme)."},{name:"parent",type:{text:"string"},description:"The ID of the folder to view. See [`DocsView.setParent`](https://developers.google.com/drive/picker/reference/picker.docsview.setparent)."},{name:"query",type:{text:"string"},description:"The query string to filter the view. See [`View.setQuery`](https://developers.google.com/drive/picker/reference/picker.view.setquery)."},{name:"select-folder-enabled",type:{text:'"default"|"true"|"false"'},description:"Whether to allow the user to select folders. See [`DocsView.selectFolderEnabled`](https://developers.google.com/drive/picker/reference/picker.docsview.setselectfolderenabled)."},{name:"starred",type:{text:'"default"|"true"|"false"'},description:"Whether to show starred files. See [`DocsView.starred`](https://developers.google.com/drive/picker/reference/picker.docsview.setstarred)."},{name:"view-id",type:{text:"string"},description:'The `keyof typeof google.picker.ViewId`. For example, `"DOCS"`, which is equivalent to `google.picker.ViewId.DOCS`. See [`ViewId`](https://developers.google.com/drive/picker/reference/picker.viewid).'}],superclass:{name:"HTMLElement"},tagName:"drive-picker-docs-view",customElement:!0}],exports:[{kind:"js",name:"DrivePickerDocsViewElement",declaration:{name:"DrivePickerDocsViewElement",module:"src/drive-picker/drive-picker-docs-view-element.ts"}}]},{kind:"javascript-module",path:"src/drive-picker/drive-picker-element.ts",declarations:[{kind:"class",description:"The `drive-picker` web component provides a convenient way to declaratively\nbuild\n[`google.picker.Picker`](https://developers.google.com/drive/picker/reference/picker)\nby using the component attributes mapped to the corresponding methods of\n[`google.picker.PickerBuilder`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder).",name:"DrivePickerElement",slots:[{description:"The default slot contains View elements to display in the picker. Each View element should implement a property `view` of type `google.picker.View`.",name:""}],members:[{kind:"field",name:"picker",type:{text:"google.picker.Picker | undefined"},privacy:"private"},{kind:"field",name:"observer",type:{text:"MutationObserver | undefined"},privacy:"private"},{kind:"field",name:"google",type:{text:"typeof google | undefined"},privacy:"private"},{kind:"field",name:"loading",type:{text:"Promise<void> | undefined"},privacy:"private"},{kind:"field",name:"visible",type:{text:"boolean"},privacy:"public",description:`Controls the visibility of the picker after the picker dialog has been
closed. If any of the attributes change, the picker will be rebuilt and
the visibility will be reset.`},{kind:"method",name:"build",privacy:"private"},{kind:"field",name:"views",type:{text:"(View | google.picker.ViewId)[]"},privacy:"private",description:"The `google.Picker.View` objects to display in the picker as defined by the slot elements.",readonly:!0},{kind:"method",name:"callbackToDispatchEvent",privacy:"private",parameters:[{name:"detail",type:{text:"google.picker.ResponseObject"}}]},{kind:"method",name:"retrieveAccessToken",privacy:"private",return:{type:{text:"Promise<string | undefined>"}}}],events:[{name:"eventType",type:{text:"CustomEvent"}},{name:"picker:oauth:error",type:{text:"google.accounts.oauth2.ClientConfigError"},description:"Triggered when an error occurs in the OAuth flow. See the [error guide](https://developers.google.com/identity/oauth2/web/guides/error)."},{name:"picker:authenticated",type:{text:"CustomEvent"}},{name:"picker:oauth:response",type:{text:"google.accounts.oauth2.ClientConfigError"},description:"Triggered when an OAuth flow completes. See the [token model guide](https://developers.google.com/identity/oauth2/web/guides/use-token-model)."},{type:{text:"google.picker.ResponseObject"},description:"Triggered when the user cancels the picker dialog. See [`ResponseObject`](https://developers.google.com/drive/picker/reference/picker.responseobject).",name:"picker:canceled"},{type:{text:"google.picker.ResponseObject"},description:"Triggered when the user picks one or more items. See [`ResponseObject`](https://developers.google.com/drive/picker/reference/picker.responseobject).",name:"picker:picked"},{type:{text:"google.picker.ResponseObject"},description:"Triggered when an error occurs. See [`ResponseObject`](https://developers.google.com/drive/picker/reference/picker.responseobject).",name:"picker:error"}],attributes:[{name:"app-id",type:{text:"string"},description:"The Google Drive app ID. See [`PickerBuilder.setAppId`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.setappid)."},{name:"client-id",type:{text:"string"},description:"The OAuth 2.0 client ID. See [Using OAuth 2.0 to Access Google APIs](https://developers.google.com/identity/protocols/oauth2)."},{name:"developer-key",type:{text:"string"},description:"The API key for accessing Google Picker API. See [`PickerBuilder.setDeveloperKey`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.setdeveloperkey)."},{name:"hide-title-bar",type:{text:'"default"|"true"|"false"'},description:"Hides the title bar of the picker if set to true. See [`PickerBuilder.hideTitleBar`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.hidetitlebar)."},{name:"locale",type:{text:"string"},description:"The locale to use for the picker. See [`PickerBuilder.setLocale`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.setlocale)."},{name:"max-items",type:{text:"number"},description:"The maximum number of items that can be selected. See [`PickerBuilder.setMaxItems`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.setmaxitems)."},{name:"mine-only",type:{text:"boolean"},description:"If set to true, only shows files owned by the user. See [`PickerBuilder.enableFeature`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.enablefeature)."},{name:"multiselect",type:{text:"boolean"},description:"Enables multiple file selection if set to true. See [`PickerBuilder.enableFeature`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.enablefeature)."},{name:"nav-hidden",type:{text:"boolean"},description:"Hides the navigation pane if set to true. See [`PickerBuilder.enableFeature`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.enablefeature)."},{name:"oauth-token",type:{text:"string"},description:"The OAuth 2.0 token for authentication. See [`PickerBuilder.setOAuthToken`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.setoauthtoken)."},{name:"origin",type:{text:"string"},description:"The origin parameter for the picker. See [`PickerBuilder.setOrigin`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.setorigin)."},{name:"relay-url",type:{text:"string"},description:"The relay URL for the picker. See [`PickerBuilder.setRelayUrl`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.setrelayurl)."},{name:"scope",type:{text:"string"},description:"The OAuth 2.0 scope for the picker. The default is `https://www.googleapis.com/auth/drive.file`. See [Drive API scopes](https://developers.google.com/drive/api/guides/api-specific-auth#drive-scopes)."},{name:"title",type:{text:"string"},description:"The title of the picker. See [`PickerBuilder.setTitle`](https://developers.google.com/drive/picker/reference/picker.pickerbuilder.settitle)."}],superclass:{name:"HTMLElement"},tagName:"drive-picker",customElement:!0}],exports:[{kind:"js",name:"DrivePickerElement",declaration:{name:"DrivePickerElement",module:"src/drive-picker/drive-picker-element.ts"}}]},{kind:"javascript-module",path:"src/drive-picker/index.ts",declarations:[],exports:[{kind:"js",name:"DrivePickerElement",declaration:{name:"DrivePickerElement",module:'"./drive-picker-element"'}},{kind:"js",name:"DrivePickerDocsViewElement",declaration:{name:"DrivePickerDocsViewElement",module:'"./drive-picker-docs-view-element"'}}]},{kind:"javascript-module",path:"src/drive-picker/types.ts",declarations:[],exports:[]}],C={schemaVersion:O,readme:j,modules:I},M=C;function L(i){return(i==null?void 0:i.customElement)===!0}const D=Object.fromEntries(M.modules.flatMap(i=>(i.declarations??[]).filter(L).map(t=>[t.tagName,t]))),R=i=>(D[i].events??[]).filter(e=>e.name!=="type"),a=Object.fromEntries(Object.entries(D).map(([i,t])=>[i,Object.fromEntries([...(t.attributes??[]).map(e=>{var o,s,n;const r={name:e.name,description:e.description,table:{type:{summary:(o=e.type)==null?void 0:o.text},category:i},control:{}};switch((s=e.type)==null?void 0:s.text){case"boolean":r.control={type:"boolean"};break;case"string":r.control="text";break;case"number":r.control="number";break;case'"default"|"true"|"false"':r.control="select",r.options=["default","true","false"];break;default:throw new Error(`Unsupported type: ${(n=e.type)==null?void 0:n.text}`)}return[e.name,r]})])])),b=(i,t)=>{for(const[e,r]of Object.entries(t))e.startsWith("on")||r!==void 0&&(typeof r=="boolean"?r&&i.setAttribute(e,""):typeof r=="string"&&i.setAttribute(e,r.toString()))},B={controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},docs:{canvas:{withToolbar:!1,sourceState:"shown"},source:{format:"html",language:"html",dark:!0,transform:i=>{var r;const t=document.createElement("div");return t.innerHTML=i,((r=t.querySelector("template"))==null?void 0:r.innerHTML.replace(T,"YOUR_APP_ID").replace(P,"YOUR_CLIENT_ID"))||i}}}},T="246724281745",P="246724281745-v9ouai8ood5o69r3ug29aaqeqflomijd.apps.googleusercontent.com";class F extends HTMLElement{constructor(){super(...arguments);c(this,"element",null)}connectedCallback(){const e=document.createElement("style");e.textContent=`
lazy-preview {
    height: 100%;
	display: flex;
	justify-content: center;
	align-items: center;
}

lazy-preview button {
	padding: 8px 16px;
	border-radius: 4px;
	border: none;
	background-color: #1a73e8;
	color: white;
	cursor: pointer;
}

lazy-preview button:hover {
	background-color: #1765cc;
}
		`,this.appendChild(e);const r=document.createElement("button");r.textContent="Open Drive Picker",this.appendChild(r),r.addEventListener("click",()=>{this.preview()})}preview(){var e;if((e=this.querySelector("drive-picker"))==null||e.remove(),!this.element)throw new Error("drive-picker not found");this.appendChild(this.element)}}customElements.define("lazy-preview",F);const N="https://apis.google.com/js/api.js",_="https://accounts.google.com/gsi/client";async function q(i="client:picker"){return window.gapi||await A(N),await new Promise(t=>{window.gapi.load(i,t)}),window.google}async function U(i,t){var e,r;return(r=(e=window.google)==null?void 0:e.accounts)!=null&&r.oauth2||await A(_),new Promise((o,s)=>{window.google.accounts.oauth2.initTokenClient({client_id:i,scope:t.replace(/,/g," ").replace(/\s+/g," "),callback:o,error_callback:s}).requestAccessToken()})}async function A(i){return new Promise((t,e)=>{document.querySelector(`script[src="${i}"]`)?t():document.head.appendChild(Object.assign(document.createElement("script"),{src:i,onload:t,onerror:e}))})}function H(i,t){const e=i.getAttribute(t);return e?Number(e):null}var m=(i=>(i[i.FALSE=0]="FALSE",i[i.TRUE=1]="TRUE",i[i.DEFAULT=2]="DEFAULT",i))(m||{});function u(i,t){return i.hasAttribute(t)}function z(i,t){var o;const e=(o=i.getAttribute(t))==null?void 0:o.toUpperCase();if(!e)return 2;const r=m[e];if(r!==void 0)return r;throw new Error(`Invalid value, "${e}", for attribute ${t}. Must be one of ${Object.keys(m).filter(Number.isNaN).join(", ")}`)}function l(i,t,e,r){const o=z(t,i);return o===2?r:e.call(r,o===1)}class G extends HTMLElement{constructor(){super(...arguments);c(this,"picker");c(this,"observer");c(this,"google");c(this,"loading")}static get observedAttributes(){return["app-id","client-id","developer-key","hide-title-bar","locale","max-items","mine-only","multiselect","nav-hidden","oauth-token","origin","relay-url","scope","title"]}get visible(){var e;return!!((e=this.picker)!=null&&e.isVisible())}set visible(e){var r;(r=this.picker)==null||r.setVisible(e)}attributeChangedCallback(){this.build()}async build(){var f;if((f=this.picker)==null||f.dispose(),await this.loading,!this.google)return;let e=new this.google.picker.PickerBuilder().setCallback(p=>{this.callbackToDispatchEvent(p)});const r=this.getAttribute("app-id");r!==null&&(e=e.setAppId(r));const o=this.getAttribute("developer-key");o!==null&&(e=e.setDeveloperKey(o));const s=this.getAttribute("locale");s!==null&&(e=e.setLocale(s));const n=H(this,"max-items");n!==null&&(e=e.setMaxItems(n));const v=this.getAttribute("origin");v!==null&&(e=e.setOrigin(v));const k=this.getAttribute("relay-url");k!==null&&(e=e.setRelayUrl(k));const g=this.getAttribute("title");g!==null&&(e=e.setTitle(g)),l("hide-title-bar",this,e.hideTitleBar,e);const h=this.getAttribute("oauth-token")??await this.retrieveAccessToken();if(h){e=e.setOAuthToken(h),u(this,"multiselect")&&(e=e.enableFeature(this.google.picker.Feature.MULTISELECT_ENABLED)),u(this,"mine-only")&&(e=e.enableFeature(this.google.picker.Feature.MINE_ONLY)),u(this,"nav-hidden")&&(e=e.enableFeature(this.google.picker.Feature.NAV_HIDDEN));for(const p of this.views)e=e.addView(p);this.picker=e.build(),this.picker.setVisible(!0)}}get views(){const e=W(this);return e.length?e:["all"]}async connectedCallback(){var e;this.loading=q().then(r=>{this.google=r,this.build()}),this.observer=new MutationObserver(r=>{r.filter(s=>s.type==="childList"||s.type==="attributes"&&s.target!==this).length&&this.build()}),(e=this.observer)==null||e.observe(this,{childList:!0,subtree:!0,attributes:!0})}callbackToDispatchEvent(e){let r;switch(e.action){case google.picker.Action.CANCEL:r="picker:canceled";break;case google.picker.Action.PICKED:r="picker:picked";break;case google.picker.Action.ERROR:r="picker:error";break;default:return}this.dispatchEvent(new CustomEvent(r,{detail:e}))}retrieveAccessToken(){return U(this.getAttribute("client-id"),this.getAttribute("scope")??"https://www.googleapis.com/auth/drive.file").then(e=>{const{access_token:r}=e;if(!r){this.dispatchEvent(new CustomEvent("picker:oauth:error",{detail:e}));return}return this.dispatchEvent(new CustomEvent("picker:authenticated",{detail:{token:r}})),this.dispatchEvent(new CustomEvent("picker:oauth:response",{detail:e})),r}).catch(e=>{this.dispatchEvent(new CustomEvent("picker:oauth:error",{detail:e}))})}disconnectedCallback(){var e;(e=this.picker)==null||e.dispose()}}function $(i){return"view"in i&&i.view instanceof window.google.picker.View}function K(i){return i.filter(t=>$(t)).map(t=>t.view)}function W(i,t="*"){return K(Array.from(i.querySelectorAll(t)))}class Y extends HTMLElement{static get observedAttributes(){return["enable-drives","include-folders","mime-types","mode","owned-by-me","parent","query","select-folder-enabled","starred","view-id"]}get view(){const t=new window.google.picker.DocsView(this.viewId);l("enable-drives",this,t.setEnableDrives,t),l("include-folders",this,t.setIncludeFolders,t),l("owned-by-me",this,t.setOwnedByMe,t),l("select-folder-enabled",this,t.setSelectFolderEnabled,t),l("starred",this,t.setStarred,t);const e=this.getAttribute("mime-types");e!==null&&t.setMimeTypes(e);const r=this.getAttribute("mode");r&&t.setMode(google.picker.DocsViewMode[r]);const o=this.getAttribute("parent");o!==null&&t.setParent(o);const s=this.getAttribute("query");return s!==null&&t.setQuery(s),t}get viewId(){const t=this.getAttribute("view-id");return t?window.google.picker.ViewId[t]:void 0}}customElements.define("drive-picker",G);customElements.define("drive-picker-docs-view",Y);const Q=R("drive-picker").map(i=>i.name),J=new URL(location.href).searchParams,X=[...Object.keys(a["drive-picker"]),...Object.keys(a["drive-picker-docs-view"])],Z=JSON.parse(J.get("args")||"{}"),ee=Object.fromEntries(X.map(i=>[i,Z[i]||void 0])),te=()=>{let i=document.body.getBoundingClientRect().height;const t=document.querySelector("div.picker-dialog");if(t){const r=t.getBoundingClientRect().height;r>0&&(i=Math.min(523,r))}const e={type:"resizeMessage",height:i};parent.postMessage(e,"*")},w=new ResizeObserver(()=>{te()});window.addEventListener("DOMContentLoaded",()=>{w.observe(document.body);const i=new Set;setInterval(()=>{const t=document.querySelector("div.picker-dialog");t&&!i.has(t)&&w.observe(t)},50);for(const t of document.querySelectorAll("a"))t.href.startsWith("https://")&&(t.target="_blank")});const oe={component:"drive-picker",argTypes:{...a["drive-picker"],...a["drive-picker-docs-view"]},args:{...ee,"app-id":T,"client-id":P},parameters:B,tags:["autodocs"]},ie=({...i})=>{const t=document.createElement("drive-picker"),e=document.createElement("drive-picker-docs-view");b(t,Object.fromEntries(Object.entries(i).filter(([s])=>a["drive-picker"][s]))),b(e,Object.fromEntries(Object.entries(i).filter(([s])=>a["drive-picker-docs-view"][s]))),t.appendChild(e);for(const s of Q)t.addEventListener(s,n=>{console.log(n)});const r=document.createElement("lazy-preview");r.element=t;const o=document.createElement("template");return o.innerHTML=t.outerHTML,r.appendChild(o),r},d={render:ie,args:{}};var y,E,x;d.parameters={...d.parameters,docs:{...(y=d.parameters)==null?void 0:y.docs,source:{originalSource:`{
  render,
  args: {}
}`,...(x=(E=d.parameters)==null?void 0:E.docs)==null?void 0:x.source}}};const se=["Default"];export{d as Default,se as __namedExportsOrder,oe as default};
